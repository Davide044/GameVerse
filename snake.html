<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<style>
body { text-align:center; font-family:Arial; background:#000; color:#fff; }
canvas { display:block; margin:20px auto; background:#111; }
button { padding:10px 15px; margin:5px; cursor:pointer; }
</style>
</head>
<body>
<h1>Snake</h1>
<canvas id="game" width="400" height="400"></canvas>
<br>
<button id="playBtn">Play</button>
<button id="pauseBtn">Pausa</button>
<button id="replayBtn">Replay</button>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const box = 20;

let snake, food, dx, dy, gameInterval;

function initGame(){
    snake = [{x:200,y:200}];
    food = {x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
    dx = box;
    dy = 0;
}

function draw(){
    ctx.fillStyle='#111'; ctx.fillRect(0,0,canvas.width,canvas.height);
    for(let s of snake){ ctx.fillStyle='lime'; ctx.fillRect(s.x,s.y,box,box); }
    ctx.fillStyle='red'; ctx.fillRect(food.x,food.y,box,box);

    let head = {x:snake[0].x+dx, y:snake[0].y+dy};

    if(head.x<0 || head.x>=canvas.width || head.y<0 || head.y>=canvas.height || snake.some(s=>s.x===head.x&&s.y===head.y)){
        clearInterval(gameInterval);
        alert('Game Over');
        return;
    }

    snake.unshift(head);

    if(head.x===food.x && head.y===food.y){
        food = {x:Math.floor(Math.random()*20)*box, y:Math.floor(Math.random()*20)*box};
    } else {
        snake.pop();
    }
}

document.addEventListener('keydown', e=>{
    if(e.key==='ArrowUp' && dy===0){ dx=0; dy=-box; }
    if(e.key==='ArrowDown' && dy===0){ dx=0; dy=box; }
    if(e.key==='ArrowLeft' && dx===0){ dx=-box; dy=0; }
    if(e.key==='ArrowRight' && dx===0){ dx=box; dy=0; }
});

document.getElementById('playBtn').onclick = () => {
    if(!gameInterval) gameInterval = setInterval(draw,100);
};

document.getElementById('pauseBtn').onclick = () => {
    clearInterval(gameInterval);
    gameInterval = null;
};

document.getElementById('replayBtn').onclick = () => {
    clearInterval(gameInterval);
    gameInterval = null;
    initGame();
    gameInterval = setInterval(draw,100);
};

// inizializza il gioco senza partire subito
initGame();
</script>
</body>
</html>
